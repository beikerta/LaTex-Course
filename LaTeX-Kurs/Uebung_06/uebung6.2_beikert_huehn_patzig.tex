% Alexandra Beikert, León-Alexander Hühn, Leon Patzig
% pdfLaTeX
\documentclass{scrartcl}

\usepackage[ngerman]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\usepackage{pgfplots}
\pgfplotsset{compat=1.16}



\usepackage{pgfplotstable}
\usepackage{gnuplottex}%[miktex]%[shell]




\begin{document}



\begin{tikzpicture}
\begin{axis}[title=Zerfallsprozess, xlabel=Zeit, ylabel=Zerfälle]
\addplot+[only marks,
error bars/.cd,
y dir=both, y explicit,]
table
[x=zeit, y=zerfaelle, y error=zerfaelle_err]
{06_messwerte.dat};

\addplot [no markers, red] gnuplot [raw gnuplot] { % "raw gnuplot" allows us to use arbitrary gnuplot commands
         f(x) = a*exp(b*x); % Define the function to fit
            a=1; b=-0.001; % Set reasonable starting values here
            fit f(x) '06_messwerte.dat' u 1:2:3 via a,b; % Select the file, the columns (indexing starts at 1) and the variables
            plot [x=50:600] f(x); % Specify the range to plot    
     	  set print "parameters.dat";  % Open a file to save the parameters
            print a, b;                  % Write the parameters to file
  
};


\end{axis}
\end{tikzpicture}


\end{document}

